<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>C++: Some Assembly Required</title>

    <link rel="stylesheet" href="reveal.js/dist/reset.css" />
    <link rel="stylesheet" href="reveal.js/dist/reveal.css" />
    <link rel="stylesheet" href="reveal.js/dist/theme/sky.css" />
    <link rel="stylesheet" href="reveal.js/plugin/highlight/zenburn.css" />
    <link rel="shortcut icon" href="images/favicon.png" />

    <link rel="stylesheet" href="style.css" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.5.0/chart.umd.js"
      integrity="sha512-D4pL3vNgjkHR/qq+nZywuS6Hg1gwR+UzrdBW6Yg8l26revKyQHMgPq9CLJ2+HHalepS+NuGw1ayCCsGXu9JCXA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section
          class="first hide-footer"
          data-background-gradient=""
          data-background="images/title.png"
        ></section>
        <!--
        <section>
          <div>
            <h2>C++:</h2>
            <h3>Some Assembly Required</h3>
            <h5>
              CppCon 2025<br />
              Matt Godbolt <br />
              <svg
                fill="none"
                viewBox="0 0 64 57"
                width="32"
                style="width: 32px; height: 28.5px"
              >
                <path
                  fill="#0085ff"
                  d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805ZM50.127 3.805C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745Z"
                ></path>
              </svg>
              <a href="https://bsky.app/profile/matt.godbolt.org"
                >@matt.godbolt.org</a
              >
            </h5>
          </div>
        </section>
        -->
        <section
          data-markdown="intro.md"
          data-separator="^-----"
          data-separator-vertical="^---"
          data-separator-notes="^Notes:"
        ></section>
        <section
          data-markdown="asm.md"
          data-separator="^-----"
          data-separator-vertical="^---"
          data-separator-notes="^Notes:"
        ></section>
        <section
          data-markdown="libraries.md"
          data-separator="^-----"
          data-separator-vertical="^---"
          data-separator-notes="^Notes:"
        ></section>
        <section
          data-markdown="process.md"
          data-separator="^-----"
          data-separator-vertical="^---"
          data-separator-notes="^Notes:"
        ></section>
        <section
          data-markdown="committee.md"
          data-separator="^-----"
          data-separator-vertical="^---"
          data-separator-notes="^Notes:"
        ></section>
        <section
          data-markdown="congregation.md"
          data-separator="^-----"
          data-separator-vertical="^---"
          data-separator-notes="^Notes:"
        ></section>
        <section
          data-markdown="conclusion.md"
          data-separator="^-----"
          data-separator-vertical="^---"
          data-separator-notes="^Notes:"
        ></section>
      </div>
      <div id="footer" class="footer">
        &copy;
        <a href="https://bsky.app/profile/matt.godbolt.org">Matt Godbolt</a>
        2025
      </div>
    </div>

    <script type="module">
      import Reveal from "./reveal.js/dist/reveal.esm.js";
      import Markdown from "./reveal.js/plugin/markdown/markdown.esm.js";
      import Highlight from "./reveal.js/plugin/highlight/highlight.esm.js";
      import RevealNotes from "./reveal.js/plugin/notes/notes.esm.js";
      import CompilerExplorer from "./reveal-ce/index.js";
      import { setupChart } from "./cpp_conferences_graph.js";

      function asmSH4() {
        return {
          keywords: {
            keyword: "MOV ADD SUB MUL DIV FMOV ADD",
          },
          contains: [
            { className: "keyword", begin: "\\.[WD]|SHL[LR][0-9]" },
            { className: "comment", begin: ";", end: "$" },
            { className: "labeldef", begin: "^\\.[a-zA-Z_][a-zA-Z_0-9]*" },
            { className: "label", begin: "[a-z][a-zA-Z]*" },
            { className: "literal", begin: "#?\\$?[0-9a-f]+" },
          ],
        };
      }

      function asmMy() {
        return {
          keywords: {
            keyword: "imul mov ret mul inc add rep stosb b ldr and madd jal lru lea vaddps",
          },
          contains: [
            { className: "literal", begin: "^[0-9a-f]+"},
            { className: "symbol", begin: "\\b([er]?(ax|bx|cx|dx|si|di|sp|bp)|([watx]|[xyz]mm|k)[0-9]+)\\b" },
            { className: "comment", begin: ";", end: "$" },
          ],
        };
      }

      Reveal.initialize({
        history: true,
        transition: "fade",
        slideNumber: false,
        width: 1280,
        height: 720,
        markdown: {
          smartypants: true,
        },
        plugins: [Markdown, CompilerExplorer, Highlight, RevealNotes],
        totalTime: 68 * 60,
        highlight: {
          beforeHighlight: (hljs) => {
            hljs.registerLanguage("asmsh", asmSH4);
            hljs.registerLanguage("asmmy", asmMy);
          }
        },
        ce: {
          baseUrl: "https://explain.compiler-explorer.com",
          defaultCompiler: "g152",
          defaultCompilerOptions: "-march=skylake",
          maxLineLength: 100,
        },
      });

      const hideyMcHideFace = (event) => {
        document
          .getElementById("footer")
          .classList.toggle(
            "hidden",
            event.currentSlide.classList.contains("hide-footer"),
          );
        setupChart();
      };
      Reveal.on("ready", hideyMcHideFace);

      Reveal.on("slidechanged", hideyMcHideFace);
    </script>
  </body>
</html>
